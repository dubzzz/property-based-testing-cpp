<!DOCTYPE html>
<html>
  <head>
    <title>Property-based testing -- by Nicolas DUBIEN</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="reveal/reveal.min.css"><!-- https://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.min.css -->
    <link rel="stylesheet" href="reveal/black-patched.css"><!-- https://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/black.css -->
    <link rel="stylesheet" href="highlight/atom-one-dark.min.css" id="highlight-css"><!-- https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/css/zenburn.css -->
    <link rel="stylesheet" href="reveal-style.css">
  </head>
  <body>
    <div class="reveal">
        <div class="slides">
            <section>
                <section>
                    <h1>Property-based testing</h1>
                    <h2 class="more">Using <a href="https://github.com/emil-e/rapidcheck/" target="_blank">RapidCheck</a></h2>
                </section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Another test philosophy</li>
                        <li>Assumptions when testing</li>
                        <li>Properties for real life</li>
                    </ol>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li class="active">Another test philosophy</li>
                        <li>Assumptions when testing</li>
                        <li>Properties for real life</li>
                    </ol>
                </section>
                <section>
                    <h3>Some tests strategies</h3>
                </section>
                <section>
                    <table>
                        <tr>
                            <td>
                                <p>Static code analysis</p>
                            </td>
                            <td>
                                <p>Example based testing</p>
                                <p class="vsmallnote">Given inputs should produce given results</p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>Proved code</p>
                                <p class="vsmallnote">Demonstrate a code by checking that its invariants hold throughout its execution</p>
                            </td>
                            <td>
                                <p>Crash under random</p>
                                <p class="vsmallnote">Monitor a software for exceptions on random inputs - <em>Monkey testing</em> - or random data - <em>Fuzzing</em></p>
                            </td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h3>Definition</h3>
                </section>
                <section>
                    <p>Test properties instead of isolated cases</p>
                </section>
                <section>
                    <p class="quote">
                        for all <em>(x, y, ...)</em>
                        <br/>such that <em>precondition(x, y, ...)</em> holds
                        <br/><em>property(x, y, ...)</em> is true
                    </p>
                </section>
                <section>
                    <h3>How does it work?</h3>
                </section>
                <section>
                    <p class="flex no-margin" style="border-bottom: dotted 1px white">
                        <span class="left-column">for all</span>
                        <span class="right-column fragment" data-fragment-index="6">run it <em>100</em> times</span>
                    </p>
                    <p class="flex no-margin" style="border-bottom: dotted 1px white">
                        <span class="left-column left-padded"><em>(x, y, ...)</em></span>
                        <span class="right-column left-padded fragment" data-fragment-index="1">generate random inputs based on specified generators</span>
                    </p>
                    <p class="flex no-margin" style="border-bottom: dotted 1px white">
                        <span class="left-column left-padded">
                            such that
                            <br/><em>pre-condition(x, y, ...)</em> holds
                        </span>
                        <span class="right-column left-padded fragment" data-fragment-index="2">
                            check pre-conditions
                            <br/><span class="fragment" data-fragment-index="3"><em>fails?</em>: go back to previous</span>
                        </span>
                    </p>
                    <p class="flex no-margin">
                        <span class="left-column left-padded"><em>property(x, y, ...)</em> is true</span>
                        <span class="right-column left-padded fragment" data-fragment-index="4">
                            run the test
                            <br/><span class="fragment" data-fragment-index="5"><em>fails?</em>: try shrinking</span>
                        </span>
                    </p>
                </section>
                <section>
                    <h3>Benefits</h3>
                </section>
                <section>
                    <p>Straight to corner cases</p>
                    <p class="fragment">Use the scope of all possible inputs</p>
                    <p class="fragment">Shrink the input in case of failure</p>
                </section>
                <section>
                    <p>Example:</p>
                    <p class="quote">
                        for all <em>a</em>, <em>b</em>, <em>c</em> strings
                        <br/><em>b</em> is a substring of <em>a + b + c</em>
                    </p>
                </section>
                <section>
                    <p>Let's say that our <em>is_substring</em> fails when the string ends by the pattern</p>
                </section>
                <section>
                    <p>It might have built:</p>
                    <pre class="fragment"><code class="hljs" data-trim>
(a, b, c) = ("aaa", "bbb", "ccc")
is_substring("bbb", "aaabbbccc")?  TEST OK
                    </code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
(a, b, c) = (   "",  "dd",   "e")
is_substring("dd", "dde")?         TEST OK
                    </code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
(a, b, c) = ( "yy",   "w",   "")
is_substring("w", "yyw")?          TEST FAILURE
                    </code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
-- SHRINK INPUT --
                    </code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
(a, b, c) = (   "",    "",   "")
is_substring("", "")?              TEST FAILURE
                    </code></pre>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Another test philosophy</li>
                        <li class="active">Assumptions when testing</li>
                        <li>Properties for real life</li>
                    </ol>
                </section>
                <section>
                    <h3>Observation</h3>
                </section>
                <section>
                    <h4>Why do we tests?</h4>
                    <ul>
                        <li class="fragment">check for possible regressions,</li>
                        <li class="fragment">early bug detection,</li>
                        <li class="fragment">development logic,</li>
                        <li class="fragment">documentation, ...</li>
                    </ul>
                    <p class="fragment">An helper not an end in itself</p>
                </section>
                <section>
                    <h4>Our faith in tests:</h4>
                    <ul>
                        <li class="fragment">up-to-date</li>
                        <li class="fragment">as simple as possible</li>
                        <li class="fragment">evolve with the code</li>
                        <li class="fragment">wide coverage</li>
                    </ul>
                </section>
                <section>
                    <p>But what if it was:</p>
                    <ul>
                        <li class="fragment">costly to maintain</li>
                        <li class="fragment">limiting possible improvments</li>
                    </ul>
                </section>
                <section>
                    <h3>Statement</h3>
                </section>
                <section>
                    <h4>How would you test a JSON serializer given the following specification?</h4>
                    <p class="quote">Converts a value to JSON notation representing it.</p>
                    <p class="vsmallnote">Such specification is the one described by <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify" title="Mozilla Foundation web docs" target="_blank">Mozilla Foundation web docs</a>
                        for `JSON.stringify` of JavaScript.
                        The exhaustive specification is available on <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-15.12.3" title="ECMA-262" target="_blank">ECMA-262</a>.
                    </p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
namespace json {
    
    class JsonObject;
    class JsonArray : public JsonObject;
    class JsonDictionary : public JsonObject;
    
    std::string stringify(JsonObject const&amp;);
    std::unique_ptr&lt;JsonObject&gt; parse(std::string const&amp;);
    
}//json
                    </code></pre>
                </section>
                <section>
                    <h3>Easy, isn't it?</h3>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
TEST(Stringify, ObjectWithTwoAttributesAandB) {
    auto instanceWithAandB = json::JsonDictionary {}
            .with("a", json::JsonInteger {4})
            .with("b", json::JsonInteger {7});
    
    ASSERT_EQ(
        std::string{"{\"a\":4,\"b\":7}"},
        json::stringify(instanceWithAandB));
}
                    </code></pre>
                </section>
                <section>
                    <h3>Not really...</h3>
                </section>
                <section>
                    <h4>Key ordering</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4,"b":7}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"b":7,"a":4}</code></pre>
                    <p class="fragment">Change storage strategy?</p>
                </section>
                <section>
                    <h4>Deterministic</h4>
                    <p class="fragment">Run on other platform?</p>
                    <p class="fragment">Static data?</p>
                </section>
                <section>
                    <h4>Ident</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a"  :4   ,  "b"  :7     }</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4                    ,"b":7                    }</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>
{
    "a" : 4,
    "b" : 7
}
                    </code></pre>
                    <p class="fragment">Divide into multiple threads?</p>
                </section>
                <section>
                    <h4>Notation</h4>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":4E0,"b":7E0}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"a":40E-1,"b":7E0}</code></pre>
                    <pre class="fragment"><code class="hljs" data-trim>{"\u0061":4,"b":7}</code></pre>
                    <p class="fragment">Full unicode?</p>
                </section>
                <section>
                    <h3>Property</h3>
                </section>
                <section>
                    <h4>Any idea?</h4>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
namespace json {

    std::string stringify(JsonObject const&amp;);
    std::unique_ptr&lt;JsonObject&gt; parse(std::string const&amp;);
    
}//json
                    </code></pre>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Stringify,
              StringifyThenParseIsIdentity,
              (json::JsonObject const&amp; elt))
{
    RC_ASSERT(*json::parse(json::stringify(elt)) == elt);
}
                    </code></pre>
                    <p class="vsmallnote">
                        Taking the object resulting from the conversion of the JsonObject to a string then back to a JsonObject
                        should be equivalent to take the original instance itself.
                    </p>
                </section>
            </section>
            <section>
                <section>
                    <h2>Agenda</h2>
                    <ol class="agenda">
                        <li>Another test philosophy</li>
                        <li>Assumptions when testing</li>
                        <li class="active">Properties for real life</li>
                    </ol>
                </section>
                <section>
                    <h3>Context</h3>
                </section>
                <section>
                    <p><a href="https://www.codingame.com/" target="_blank" title="CodinGame">CodinGame</a></p>
                </section>
                <section>
                    <p>Two sets of tests:</p>
                    <ul>
                        <li>public set: available for development</li>
                        <li>private set: unknown tests</li>
                    </ul>
                </section>
                <section>
                    <h3>Statement</h3>
                </section>
                <section>
                    <h4>Aim:</h4>
                    <p>Find the position of a bomb in a limited number of guesses</p>
                </section>
                <section>
                    <h4>Each turn:</h4>
                    <ul>
                        <li class="fragment">receive: indication of the direction of the bomb</li>
                        <li class="fragment">send: new guess</li>
                    </ul>
                    <p class="fragment vsmallnote">grid size and current location known</p>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (4, 4)
$: hint       = "DR"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"><span class="bomb"></span></span>
                            <span class="office-on2"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (4, 4)
$: hint       = "DR"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 6)
$: hint       = "D"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 6)
$: hint       = "D"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-on"><span class="bomb"></span><span class="tux"></span></span>
                            <span class="office-off"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: position   = (6, 7)
$: hint       = ""
                    </code></pre>
                </section>
                <section>
                    <h4>Sources</h4>
                    <p class="quote">The goal of this puzzle is to guess the coordinate of a bomb (line and column of a 2 dimensional array). You will have to make a guess at each step of the puzzle and adjust it from given feedbacks. Of course, you have a limited number of guess.</p>
                    <p class="vsmallnote">Taken from <a href="https://www.codingame.com/training/medium/shadows-of-the-knight-episode-1" target="_blank" title="CodinGame">CodinGame</a></p>
                    <p class="quote">Before each [guess], the heat-signature device will provide Batman with the direction of the bombs based on Batman current position.</p>
                    <p class="vsmallnote">Taken from <a href="https://www.codingame.com/training/medium/shadows-of-the-knight-episode-1" target="_blank" title="CodinGame">CodinGame</a></p>
                </section>
                <section>
                    <h3>Prototypes</h3>
                </section>
                <section>
                    <h4>Expected answer</h4>
                    <pre><code class="hljs cpp" data-trim>void locate_in_space(Space&amp; space, std::size_t rounds);</code></pre>
                </section>
                <section>
                    <h4>Helper to read from CodinGame</h4>
                    <pre><code class="hljs cpp" data-trim>
class Space
{
public:
    // dimensions of the grid
    std::size_t dimension_x() const;
    std::size_t dimension_y() const;
    // last known location
    std::size_t previous_x() const;
    std::size_t previous_y() const;
    // direction to the target (U / D, L / R)
    std::string const& hint() const;
    // is it the position of the target?
    bool solved() const;
    // update position
    void move(std::size_t x, std::size_t y);
};
                    </code></pre>
                </section>
                <section>
                    <h3>Implementation</h3>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <p>Hint: DR</p>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                            <span class="office-on2"></span>
                        </span>
                    </p>
                    <p>Hint: DR</p>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <p>Hint: U</p>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on2"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                        </span>
                    </p>
                    <p>Hint: U</p>
                </section>
                <section>
                    <p>...</p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
void locate_in_space(Space&amp; space, std::size_t rounds)
{
    std::size_t x_min = 0;
    std::size_t x_max = space.dimension_x();
    std::size_t y_min = 0;
    std::size_t y_max = space.dimension_y();
    for (std::size_t n {} ;
        n != rounds &amp;&amp; ! space.solved() ;
        ++n)
    {
        // content on next slide
    }
}
                    </code></pre>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
if (x_min >= x_max || y_min >= y_max) { return; }
std::size_t x0 = space.previous_x();
auto const&amp; hint = space.hint();
if (hint.back() == 'L')
{
    x_max = x0 -1;
    x0 = (x_max + x_min) /2;
}
else if (hint.back() == 'R')
{
    x_min = x0 +1;
    x0 = (x_max + x_min) /2;
}
// same for y...
space.move(x0, y0);
                    </code></pre>
                </section>
                <section>
                    <h3>Results</h3>
                </section>
                <section>
                    <h4>User tests</h4>
                    <img src="codingame-user-tests.png" alt="User tests results" />
                </section>
                <section>
                    <h4>Evaluation tests</h4>
                    <img src="codingame-eval-tests.png" alt="Evaluation tests results" />
                </section>
                <section>
                    <h3>Property</h3>
                </section>
                <section>
                    <h4>What?</h4>
                    <p class="fragment">Solve the game in a limited amount of guesses</p>
                    <p class="quote fragment">
                        At first, we can assume that we will be able to solve it in a maximum of <em>width</em> x <em>height</em>
                    </p>
                    <p class="quote fragment">
                        We can solve it in max(<em>width</em>, <em>height</em>) without too many complexity
                    </p>
                    <p class="quote fragment">
                        We can solve it in ceil(log2(max(<em>width</em>, <em>height</em>)))
                    </p>
                </section>
                <section>
                    <h4>Inputs</h4>
                    <p class="fragment">(<em>width</em>, <em>height</em>): integers between 1 and 10 000*</p>
                    <p class="fragment">(<em>start_x</em>, <em>target_x</em>): integers between 0 and <em>width</em>*</p>
                    <p class="fragment">(<em>start_y</em>, <em>target_y</em>): integers between 0 and <em>height</em>*</p>
                    <p class="fragment">(<em>num_rounds</em>): max(<em>width</em>, <em>height</em>)</p>
                    <p class="vsmallnote">*not included</p>
                </section>
                <section>
                    <h4>Success</h4>
                    <p class="fragment">Reach the target with a maximum of <em>num_rounds</em> rounds</p>
                </section>
                <section>
                    <h4>RapidCheck implementation</h4>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(ShadowsOfTheKnight, SAlwaysReachTarget, ())
{
    auto w = *inRange(1, 10000).as("grid width");
    auto h = *inRange(1, 10000).as("grid height");
    auto inRangeGen = apply(
        [](auto x, auto y) { return std::make_pair(x, y); }
        , inRange(0, w), inRange(0, h));
    auto current  = *inRangeGen.as("start position");
    auto solution = *inRangeGen.as("target position");
    Space space = SpaceBuilder{}
        .withDimension(w, h)
        .withSolution(solution.first, solution.second)
        .withCurrent(current.first, current.second).build();
    locate_in_space(space, std::max(h, w));
    RC_ASSERT(space.solved());
}
                    </code></pre>
                </section>
                <section>
                    <h3>Run tests</h3>
                </section>
                <section>
                    <h4>Failed with output:</h4>
                    <pre><code class="hljs" data-trim>
Falsifiable after 9 tests and 5 shrinks

grid width:
8

grid height:
8

start position:
(0, 1)

target position:
(1, 0)
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-on"><span class="limit"></span></span>
                            <span class="office-on"><span class="bomb"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 8)
$: xmin, xmax = (0, 8)       $: ymin, ymax = (0, 0)
$: ymin, ymax = (0, 8)       $: position   = (4, 0)
$: position   = (0, 1)
$: hint       = "UR"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: Cannot suggest anything,
$: xmin, xmax = (1, 8)       $: it seems that
$: ymin, ymax = (0, 0)       $: there is no solution
$: position   = (4, 0)
$: hint       = "L"
                    </code></pre>
                </section>

                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-on"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"><span class="limit"></span></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 3)
$: xmin, xmax = (1, 8)       $: ymin, ymax = (0, 1)
$: ymin, ymax = (0, 1)       $: position   = (2, 0)
$: position   = (4, 0)
$: hint       = "L"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span></span>
                            <span class="office-on"><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:                        Strategy:
$: dimensions = (8, 8)       $: xmin, xmax = (1, 2)
$: xmin, xmax = (1, 3)       $: ymin, ymax = (0, 1)
$: ymin, ymax = (0, 1)       $: position   = (1, 0)
$: position   = (2, 0)
$: hint       = "L"
                    </code></pre>
                </section>
                <section data-transition="fade-out">
                    <p class="building">
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-on"><span class="limit"></span><span class="bomb"></span><span class="tux"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"><span class="limit"></span></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-off"></span>
                            <span class="office-no"></span>
                        </span>
                        <span class="bline">
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                            <span class="office-no"></span>
                        </span>
                    </p>
                    <pre><code class="hljs" data-trim>
Hint:
$: dimensions = (8, 8)
$: xmin, xmax = (1, 2)
$: ymin, ymax = (0, 1)
$: position   = (1, 0)
$: hint       = ""
                    </code></pre>
                </section>
            </section>
            <section>
                <h2>Questions?</h2>
                <p><a href="https://github.com/dubzzz/property-based-testing-cpp" title="Talk materials &amp; sources" target="_blank">Talk materials &amp; sources</a></p>
                <p><a href="https://www.youtube.com/watch?v=hXnS_Xjwk2Y" title="John Hughes - Don't Write Tests" target="_blank">John Hughes - Don't Write Tests</a></p>
                <p><a href="https://labs.spotify.com/2015/06/25/rapid-check/" title="Generating test cases so you dont have to" target="_blank">Generating test cases so you dont have to</a></p>
            </section>
            <section>
                <section>
                    <h2>More</h2>
                    <h3>Property-based testing in action</h3>
                </section>
                <section>
                    <h3>Bounded output</h3>
                </section>
                <section>
                    <p class="quote">
                        for all a and b integers,
                        <br/>the average of a and b is between a and b
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Average, ShouldBeBetweenAAndB,
              (int a, int b))
{
    RC_PRE(a &lt;= b);
    RC_ASSERT(a &lt;= average(a,b) &amp;&amp; average(a,b) &lt;= b);
}
                    </code></pre>
                    <p class="vsmallnote">Assumptions concerning the range in which will be the output</p>
                </section>
                <section>
                    <h3>Limited set of inputs</h3>
                </section>
                <section>
                    <p class="quote">
                        for all (a, b, c) strings,
                        <br/>b is a substring of the concatenation of a, b and c
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(Contains,
              ShouldBeTrueOnAllStringsBuiltAroundPattern,
              (std::string a,
               std::string b,
               std::string c))
{
    RC_ASSERT(contains(b, a + b + c));
}
                    </code></pre>
                    <p class="vsmallnote">Subset of inputs having a trivial answer</p>
                </section>
                <section>
                    <h3>Compare to another implementation</h3>
                </section>
                <section>
                    <p class="quote">
                        for all data - sorted array of integers - and n - integer,
                        <br/>the result of the linear search of n in data is the same as the one of the binary search of n in data
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(FindDicho, ShouldBeSameAsSimpler,
              (std::vector&lt;int&gt; data, int n))
{
    std::sort(data.begin(), data.end());
    RC_ASSERT(find_dicho(data, n) == find_linear(data, n));
}
                    </code></pre>
                    <p class="vsmallnote">Another algorithm - in general, simpler to implement - exists</p>
                </section>
                <section>
                    <h3>Combination of functions</h3>
                </section>
                <section>
                    <h4>Round trip</h4>
                </section>
                <section>
                    <p class="quote">
                        for all n integer,    
                        <br/>the integer equivalent of the roman representation of n is itself
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(RomanConversion, FromOfToIsIdentity,
              (int n))
{
    RC_ASSERT(from_roman(to_roman(n)) == n);
}
                    </code></pre>
                    <p class="vsmallnote">Encode and decode pair of functions</p>
                </section>
                <section>
                    <h4>More general combination</h4>
                </section>
                <section>
                    <p class="quote">
                        for all a and b integers,       
                        <br/>lcm(a,b) * gcd(a,b) = a * b
                    </p>
                    <pre><code class="hljs cpp" data-trim>
RC_GTEST_PROP(LcmGcd, RelationBetweenLcmAndGcd,
              (int a, int b))
{
    RC_ASSERT(lcm(a,b) * gcd(a,b) = a * b);
}
                    </code></pre>
                    <p class="vsmallnote">Some properties hold given a combination of multiple functions</p>
                </section>
                <section>
                    <h3>Commands based</h3>
                </section>
                <section>
                    <p>Why  don't we test that the code follow the specifications?</p>
                </section>
                <section>
                    <p>Check pre-conditions before running a command</p>
                </section>
                <section>
                    <p>Check post-conditions after</p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>
struct PlayCommand : MusicPlayerCommand
{
    void checkPreconditions(MPModel const&amp; /*m*/) const override {}
    void apply(MPModel&amp; m) const override { m.is_playing = true; }
    void run(MPModel const&amp; /*m*/, MusicPlayer&amp; p) const override
    {
        p.play();
        RC_ASSERT(p.is_playing());
    }
    void show(std::ostream&amp; os) const override { os &lt;&lt; "Play"; }
};
                    </code></pre>
                    <p class="vsmallnote">After running play, player must be in playing mode</p>
                </section>
                <section>
                    <pre><code class="hljs cpp" data-trim>

struct NextCommand : MusicPlayerCommand
{
    void checkPreconditions(MPModel const&amp; /*m*/) const override {}
    void apply(MPModel&amp; m) const override {}
    void run(MPModel const&amp; m, MusicPlayer&amp; p) const override
    {
        auto track_before = p.track_name();
        p.next();
        RC_ASSERT(m.is_playing == p.is_playing());
        if (m.num_tracks == 1)
            RC_ASSERT(track_before == p.track_name());
        else
            RC_ASSERT(track_before != p.track_name());
    }
    void show(std::ostream&amp; os) const override { os &lt;&lt; "Next"; }
};
                    </code></pre>
                    <p class="vsmallnote">Next always moves to a different song for multiple tracks playlists</p>
                </section>
            </section>
        </div>
    </div>
    <script src="reveal/head.min.js"></script><!-- https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/head.min.js -->
    <script src="reveal/reveal.min.js"></script><!-- https://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.min.js -->
    <script src="reveal-config.js"></script>
    <script src="reveal-mouse.js"></script>
    <script src="reveal-highlight.js"></script>
  </body>
</html>
